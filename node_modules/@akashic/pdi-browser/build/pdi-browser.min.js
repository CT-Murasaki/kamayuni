require=function i(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,i,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AudioManager=void 0;var o=(r.prototype.registerAudioAsset=function(e){-1===this.audioAssets.indexOf(e)&&this.audioAssets.push(e)},r.prototype.removeAudioAsset=function(e){var t=this.audioAssets.indexOf(e);-1===t&&this.audioAssets.splice(t,1)},r.prototype.setMasterVolume=function(e){this._masterVolume=e;for(var t=0;t<this.audioAssets.length;t++)this.audioAssets[t]._lastPlayedPlayer&&this.audioAssets[t]._lastPlayedPlayer.notifyMasterVolumeChanged()},r.prototype.getMasterVolume=function(){return this._masterVolume},r);function r(){this.audioAssets=[],this._masterVolume=1}n.AudioManager=o},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ContainerController=void 0;var o=e("@akashic/akashic-engine"),i=e("./canvas/RenderingHelper"),a=e("./InputHandlerLayer"),r=(s.prototype.initialize=function(e){this._rendererReq=e.rendererRequirement,this._disablePreventDefault=!!e.disablePreventDefault,this._loadView()},s.prototype.setRootView=function(e){e!==this.rootView&&(this.rootView&&(this.unloadView(),this._loadView()),this.rootView=e,this._appendToRootView(e))},s.prototype.resetView=function(e){this.unloadView(),this._rendererReq=e,this._loadView(),this._appendToRootView(this.rootView)},s.prototype.getRenderer=function(){if(!this.surface)throw new Error("this container has no surface");return this.surface.renderer()},s.prototype.changeScale=function(e,t){this.useResizeForScaling?this.surface.changePhysicalScale(e,t):this.surface.changeVisualScale(e,t),this.inputHandlerLayer._inputHandler.setScale(e,t)},s.prototype.unloadView=function(){if(this.inputHandlerLayer.disablePointerEvent(),this.rootView)for(;this.rootView.firstChild;)this.rootView.removeChild(this.rootView.firstChild)},s.prototype._loadView=function(){var e=this._rendererReq,t=e.primarySurfaceWidth,n=e.primarySurfaceHeight,o=e.rendererCandidates,r=this._disablePreventDefault;this.container=document.createDocumentFragment(),this.inputHandlerLayer?(this.inputHandlerLayer.setViewSize({width:t,height:n}),this.inputHandlerLayer.pointEventTrigger._reset(),this.inputHandlerLayer.view.removeChild(this.surface.canvas),this.surface.destroy()):this.inputHandlerLayer=new a.InputHandlerLayer({width:t,height:n,disablePreventDefault:r}),this.surface=i.RenderingHelper.createPrimarySurface(t,n,o),this.inputHandlerLayer.view.appendChild(this.surface.getHTMLElement()),this.container.appendChild(this.inputHandlerLayer.view)},s.prototype._appendToRootView=function(e){e.appendChild(this.container),this.inputHandlerLayer.enablePointerEvent(),this.inputHandlerLayer.pointEventTrigger.handle(this.pointEventTrigger,this.pointEventTrigger.fire)},s);function s(){this.container=null,this.surface=null,this.inputHandlerLayer=null,this.rootView=null,this.useResizeForScaling=!1,this.pointEventTrigger=new o.Trigger,this._rendererReq=null,this._disablePreventDefault=!1}n.ContainerController=r},{"./InputHandlerLayer":3,"./canvas/RenderingHelper":15,"@akashic/akashic-engine":"@akashic/akashic-engine"}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandlerLayer=void 0;var o=e("@akashic/akashic-engine"),r=e("./handler/TouchHandler"),i=(a.prototype.enablePointerEvent=function(){var t=this;this._inputHandler=new r.TouchHandler(this.view,this._disablePreventDefault),this._inputHandler.pointTrigger.handle(function(e){t.pointEventTrigger.fire(e)}),this._inputHandler.start()},a.prototype.disablePointerEvent=function(){this._inputHandler&&this._inputHandler.stop()},a.prototype.setOffset=function(e){var t="position:relative; left:"+e.x+"px; top:"+e.y+"px";this._inputHandler.inputView.setAttribute("style",t)},a.prototype.setViewSize=function(e){var t=this.view;t.style.width=e.width+"px",t.style.height=e.height+"px"},a.prototype._createInputView=function(e,t){var n=document.createElement("div");return n.setAttribute("tabindex","1"),n.className="input-handler",n.setAttribute("style","display:inline-block; outline:none;"),n.style.width=e+"px",n.style.height=t+"px",n},a);function a(e){this.view=this._createInputView(e.width,e.height),this._inputHandler=void 0,this.pointEventTrigger=new o.Trigger,this._disablePreventDefault=!!e.disablePreventDefault}n.InputHandlerLayer=i},{"./handler/TouchHandler":19,"@akashic/akashic-engine":"@akashic/akashic-engine"}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Platform=void 0;var o=e("./RafLooper"),r=e("./ResourceFactory"),i=e("./ContainerController"),a=e("./plugin/AudioPluginManager"),s=e("./AudioManager"),u=e("./plugin/AudioPluginRegistry"),c=e("./asset/XHRTextAsset"),l=(d.prototype.setPlatformEventHandler=function(e){this.containerController&&(this.containerController.pointEventTrigger.removeAll(this._platformEventHandler),this.containerController.pointEventTrigger.handle(e,e.onPointEvent)),this._platformEventHandler=e},d.prototype.loadGameConfiguration=function(e,n){var t=new c.XHRTextAsset("(game.json)",e);t._load({_onAssetLoad:function(e){n(null,JSON.parse(t.data))},_onAssetError:function(e,t){n(t,null)}})},d.prototype.getResourceFactory=function(){return this._resourceFactory},d.prototype.setRendererRequirement=function(e){var t;e?(this._rendererReq=e,this._resourceFactory._rendererCandidates=this._rendererReq.rendererCandidates,this.containerController&&!this.containerController.inputHandlerLayer?(this.containerController.initialize({rendererRequirement:e,disablePreventDefault:this._disablePreventDefault}),this.containerController.setRootView(this.containerView),this._platformEventHandler&&this.containerController.pointEventTrigger.handle(this._platformEventHandler,this._platformEventHandler.onPointEvent)):((t=this.getPrimarySurface())&&!t.destroyed()&&t.destroy(),this.containerController.resetView(e))):this.containerController&&this.containerController.unloadView()},d.prototype.getPrimarySurface=function(){return this.containerController.surface},d.prototype.getOperationPluginViewInfo=function(){var e=this;return{type:"pdi-browser",view:this.containerController.inputHandlerLayer.view,getScale:function(){return e.containerController.inputHandlerLayer._inputHandler.getScale()}}},d.prototype.createLooper=function(e){return new o.RafLooper(e)},d.prototype.sendToExternal=function(e,t){},d.prototype.registerAudioPlugins=function(e){return this.audioPluginManager.tryInstallPlugin(e)},d.prototype.setScale=function(e,t){this.containerController.changeScale(e,t)},d.prototype.notifyViewMoved=function(){},d.prototype.setMasterVolume=function(e){this._audioManager&&this._audioManager.setMasterVolume(e)},d.prototype.getMasterVolume=function(){if(this._audioManager)return this._audioManager.getMasterVolume()},d.prototype.destroy=function(){this.setRendererRequirement(void 0),this.setMasterVolume(0)},d);function d(e){this.containerView=e.containerView,this.containerController=new i.ContainerController,this.audioPluginManager=new a.AudioPluginManager,e.audioPlugins&&this.audioPluginManager.tryInstallPlugin(e.audioPlugins),this.audioPluginManager.tryInstallPlugin(u.AudioPluginRegistry.getRegisteredAudioPlugins()),this._audioManager=new s.AudioManager,this.amflow=e.amflow,this._platformEventHandler=null,this._resourceFactory=e.resourceFactory||new r.ResourceFactory({audioPluginManager:this.audioPluginManager,platform:this,audioManager:this._audioManager}),this._rendererReq=null,this._disablePreventDefault=!!e.disablePreventDefault}n.Platform=l},{"./AudioManager":1,"./ContainerController":2,"./RafLooper":5,"./ResourceFactory":6,"./asset/XHRTextAsset":11,"./plugin/AudioPluginManager":20,"./plugin/AudioPluginRegistry":21}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RafLooper=void 0;var o=(r.prototype.start=function(){var t=this,n=function(e){null!=t._timerId&&(t._timerId=requestAnimationFrame(n),t._fun(e-t._prev),t._prev=e)};this._timerId=requestAnimationFrame(function(e){t._timerId=requestAnimationFrame(n),t._fun(0),t._prev=e})},r.prototype.stop=function(){cancelAnimationFrame(this._timerId),this._timerId=void 0,this._prev=0},r);function r(e){this._fun=e,this._timerId=void 0,this._prev=0}n.RafLooper=o},{}],6:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ResourceFactory=void 0;var i,a=e("@akashic/akashic-engine"),s=e("./asset/HTMLImageAsset"),u=e("./asset/HTMLVideoAsset"),c=e("./asset/XHRTextAsset"),l=e("./asset/XHRScriptAsset"),d=e("./canvas/RenderingHelper"),p=e("./canvas/GlyphFactory"),h=(i=a.ResourceFactory,r(f,i),f.prototype.createAudioAsset=function(e,t,n,o,r,i){var a=this._audioPluginManager.getActivePlugin().createAsset(e,t,n,o,r,i);return a.onDestroyed&&(this._audioManager.registerAudioAsset(a),a.onDestroyed.handle(this,this._onAudioAssetDestroyed)),a},f.prototype.createAudioPlayer=function(e){return this._audioPluginManager.getActivePlugin().createPlayer(e,this._audioManager)},f.prototype.createImageAsset=function(e,t,n,o){return new s.HTMLImageAsset(e,t,n,o)},f.prototype.createVideoAsset=function(e,t,n,o,r,i,a){return new u.HTMLVideoAsset(e,t,n,o,r,i,a)},f.prototype.createTextAsset=function(e,t){return new c.XHRTextAsset(e,t)},f.prototype.createScriptAsset=function(e,t){return new l.XHRScriptAsset(e,t)},f.prototype.createSurface=function(e,t){return d.RenderingHelper.createBackSurface(e,t,this._platform,this._rendererCandidates)},f.prototype.createGlyphFactory=function(e,t,n,o,r,i,a,s){return new p.GlyphFactory(e,t,n,o,r,i,a,s)},f.prototype._onAudioAssetDestroyed=function(e){this._audioManager.removeAudioAsset(e)},f);function f(e){var t=i.call(this)||this;return t._audioPluginManager=e.audioPluginManager,t._audioManager=e.audioManager,t._platform=e.platform,t}n.ResourceFactory=h},{"./asset/HTMLImageAsset":7,"./asset/HTMLVideoAsset":8,"./asset/XHRScriptAsset":10,"./asset/XHRTextAsset":11,"./canvas/GlyphFactory":14,"./canvas/RenderingHelper":15,"@akashic/akashic-engine":"@akashic/akashic-engine"}],7:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLImageAsset=n.ImageAssetSurface=void 0;var i,a=e("@akashic/akashic-engine"),s=(i=a.Surface,r(u,i),u.prototype.renderer=function(){throw a.ExceptionFactory.createAssertionError("ImageAssetSurface cannot be rendered.")},u.prototype.isPlaying=function(){return!1},u);function u(e,t,n){return i.call(this,e,t,n)||this}n.ImageAssetSurface=s;var c,l=(c=a.ImageAsset,r(d,c),d.prototype.destroy=function(){this._surface&&!this._surface.destroyed()&&this._surface.destroy(),this.data=void 0,this._surface=void 0,c.prototype.destroy.call(this)},d.prototype._load=function(e){var t=this,n=new Image;n.onerror=function(){e._onAssetError(t,a.ExceptionFactory.createAssetLoadError("HTMLImageAsset unknown loading error"))},n.onload=function(){t.data=n,e._onAssetLoad(t)},n.src=this.path},d.prototype.asSurface=function(){if(!this.data)throw a.ExceptionFactory.createAssertionError("ImageAssetImpl#asSurface: not yet loaded.");return this._surface||(this._surface=new s(this.width,this.height,this.data)),this._surface},d);function d(e,t,n,o){var r=c.call(this,e,t,n,o)||this;return r.data=void 0,r._surface=void 0,r}n.HTMLImageAsset=l},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],8:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLVideoAsset=void 0;var i,a=e("@akashic/akashic-engine"),u=e("./HTMLVideoPlayer"),c=(i=a.Surface,r(s,i),s.prototype.renderer=function(){throw a.ExceptionFactory.createAssertionError("VideoAssetSurface cannot be rendered.")},s.prototype.isPlaying=function(){return!1},s);function s(e,t,n){return i.call(this,e,t,n,!0)||this}var l,d=(l=a.VideoAsset,r(p,l),p.prototype.inUse=function(){return!1},p.prototype._load=function(e){var t=this;setTimeout(function(){e._onAssetLoad(t)},0)},p.prototype.getPlayer=function(){return this._player},p.prototype.asSurface=function(){return this._surface},p);function p(e,t,n,o,r,i,a){var s=l.call(this,e,t,n,o,r,i,a)||this;return s._player=new u.HTMLVideoPlayer,s._surface=new c(n,o,null),s}n.HTMLVideoAsset=d},{"./HTMLVideoPlayer":9,"@akashic/akashic-engine":"@akashic/akashic-engine"}],9:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLVideoPlayer=void 0;var i,a=e("@akashic/akashic-engine"),s=(i=a.VideoPlayer,r(u,i),u.prototype.play=function(e){},u.prototype.stop=function(){},u.prototype.changeVolume=function(e){},u);function u(e){var t=i.call(this,e)||this;return t.isDummy=!0,t}n.HTMLVideoPlayer=s},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],10:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.XHRScriptAsset=void 0;var i,a=e("@akashic/akashic-engine"),s=e("../utils/XHRLoader"),u=(i=a.ScriptAsset,r(c,i),c.prototype._load=function(n){var o=this;(new s.XHRLoader).get(this.path,function(e,t){e?n._onAssetError(o,e):(o.script=t+"\n",n._onAssetLoad(o))})},c.prototype.execute=function(e){return this._wrap()(e),e.module.exports},c.prototype._wrap=function(){return new Function("g",c.PRE_SCRIPT+this.script+c.POST_SCRIPT)},c.PRE_SCRIPT="(function(exports, require, module, __filename, __dirname) {",c.POST_SCRIPT="\n})(g.module.exports, g.module.require, g.module, g.filename, g.dirname);",c);function c(e,t){var n=i.call(this,e,t)||this;return n.script=void 0,n}n.XHRScriptAsset=u},{"../utils/XHRLoader":34,"@akashic/akashic-engine":"@akashic/akashic-engine"}],11:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.XHRTextAsset=void 0;var i,a=e("@akashic/akashic-engine"),s=e("../utils/XHRLoader"),u=(i=a.TextAsset,r(c,i),c.prototype._load=function(n){var o=this;(new s.XHRLoader).get(this.path,function(e,t){e?n._onAssetError(o,e):(o.data=t,n._onAssetLoad(o))})},c);function c(e,t){var n=i.call(this,e,t)||this;return n.data=void 0,n}n.XHRTextAsset=u},{"../utils/XHRLoader":34,"@akashic/akashic-engine":"@akashic/akashic-engine"}],12:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasSurface=void 0;var i,a=e("@akashic/akashic-engine"),s=e("./Context2DRenderer"),u=(i=a.Surface,r(c,i),c.prototype.destroy=function(){this.canvas.width=1,this.canvas.height=1,this.canvas=null,this._renderer=null,i.prototype.destroy.call(this)},c.prototype.renderer=function(){return this._renderer||(this._renderer=new s.Context2DRenderer(this,this._context)),this._renderer},c.prototype.getHTMLElement=function(){return this.canvas},c.prototype.changePhysicalScale=function(e,t){this.canvas.width=this.width*e,this.canvas.height=this.height*t,this._context.scale(e,t)},c.prototype.changeVisualScale=function(e,t){var n=this.canvas.style;"transform"in n?(n.transformOrigin="0 0",n.transform="scale("+e+","+t+")"):"webkitTransform"in n?(n.webkitTransformOrigin="0 0",n.webkitTransform="scale("+e+","+t+")"):(n.width=Math.floor(e*this.width)+"px",n.height=Math.floor(t*this.width)+"px")},c.prototype.isPlaying=function(){throw a.ExceptionFactory.createAssertionError("CanvasSurface#isPlaying() is not implemented")},c);function c(e,t){var n=this,o=document.createElement("canvas"),n=i.call(this,e,t,o)||this;return o.width=e,o.height=t,n.canvas=o,n._context=o.getContext("2d"),n._renderer=void 0,n}n.CanvasSurface=u},{"./Context2DRenderer":13,"@akashic/akashic-engine":"@akashic/akashic-engine"}],13:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Context2DRenderer=void 0;var i,a=e("@akashic/akashic-engine"),p=e("./RenderingHelper"),s=(i=a.Renderer,r(u,i),u.prototype.clear=function(){this.context.clearRect(0,0,this.surface.width,this.surface.height)},u.prototype.drawImage=function(e,t,n,o,r,i,a){this.context.drawImage(e._drawable,t,n,o,r,i,a,o,r)},u.prototype.drawSprites=function(e,t,n,o,r,i,a,s){for(var u=0;u<s;++u)this.drawImage(e,t[u],n[u],o[u],r[u],i[u],a[u])},u.prototype.drawSystemText=function(e,t,n,o,r,i,a,s,u,c,l,d){p.RenderingHelper.drawSystemTextByContext2D(this.context,e,t,n,o,r,i,a,s,u,c,l,d)},u.prototype.translate=function(e,t){this.context.translate(e,t)},u.prototype.transform=function(e){this.context.transform.apply(this.context,e)},u.prototype.opacity=function(e){this.context.globalAlpha*=e},u.prototype.save=function(){this.context.save()},u.prototype.restore=function(){this.context.restore()},u.prototype.fillRect=function(e,t,n,o,r){var i=this.context.fillStyle;this.context.fillStyle=r,this.context.fillRect(e,t,n,o),this.context.fillStyle=i},u.prototype.setCompositeOperation=function(e){this.context.globalCompositeOperation=p.RenderingHelper.toTextFromCompositeOperation(e)},u.prototype.setOpacity=function(e){this.context.globalAlpha=e},u.prototype.setTransform=function(e){this.context.setTransform.apply(this.context,e)},u);function u(e,t){var n=i.call(this)||this;return n.surface=e,n.context=t,n}n.Context2DRenderer=s},{"./RenderingHelper":15,"@akashic/akashic-engine":"@akashic/akashic-engine"}],14:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GlyphFactory=void 0;var P=e("@akashic/akashic-engine"),w=e("./CanvasSurface");function i(e,t,n,o,r,i,a,s,u,c,l,d){var p=t<b._environmentMinimumFontSize?t/b._environmentMinimumFontSize:1,h=Math.ceil((t+2*r)*p),f=Math.ceil((t+2*i)*p),y=new w.CanvasSurface(h,f),_=y.canvas,g=_.getContext("2d"),v=4294901760&e?String.fromCharCode((4294901760&e)>>>16,65535&e):String.fromCharCode(e),m=d===P.FontWeight.Bold?"bold ":"";g.save(),g.font=m+t+"px "+n,g.textAlign="left",g.textBaseline="alphabetic",g.lineJoin="bevel",1!=p&&g.scale(p,p),0<u&&(g.lineWidth=u,g.strokeStyle=c,g.strokeText(v,r,i+o)),l||(g.fillStyle=s,g.fillText(v,r,i+o));var A=g.measureText(v).width;return g.restore(),{surface:y,advanceWidth:A,imageData:a?g.getImageData(0,0,_.width,_.height):void 0}}function d(e){switch(e){case P.FontFamily.Monospace:return"monospace";case P.FontFamily.Serif:return"serif";default:return"sans-serif"}}var a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function p(e){return-1!==a.indexOf(e)?e:'"'+e+'"'}var h,b=(h=P.GlyphFactory,r(f,h),f.prototype.create=function(e){var t,n,o=this._glyphAreas[e];return o||((o=function(e){for(var t=e.width,n=e.height,o=0,r=0,i=0,a=0,s=e.height;a<s;a=a+1|0)for(var u=0,c=e.width;u<c;u=u+1|0)0!==e.data[i+3]&&(u<t&&(t=u),o<u&&(o=u),a<n&&(n=a),r<a&&(r=a)),i+=4;return t===e.width?{x:0,y:0,width:0,height:0}:{x:t,y:n,width:o-t+1,height:r-n+1}}((t=i(e,this.fontSize,this._cssFontFamily,this.baselineHeight,this._marginW,this._marginH,!0,this.fontColor,this.strokeWidth,this.strokeColor,this.strokeOnly,this.fontWeight)).imageData)).advanceWidth=t.advanceWidth,this._glyphAreas[e]=o),0===(n=o).width||0===n.height?(t&&t.surface.destroy(),new P.Glyph(e,0,0,0,0,0,0,o.advanceWidth,void 0,!0)):(t=t||i(e,this.fontSize,this._cssFontFamily,this.baselineHeight,this._marginW,this._marginH,!1,this.fontColor,this.strokeWidth,this.strokeColor,this.strokeOnly,this.fontWeight),new P.Glyph(e,o.x,o.y,o.width,o.height,o.x-this._marginW,o.y-this._marginH,o.advanceWidth,t.surface,!0))},f.prototype.measureMinimumFontSize=function(){var e,t=1,n=document.createElement("canvas").getContext("2d");n.textAlign="left",n.textBaseline="alphabetic",n.lineJoin="bevel",n.font=t+"px sans-serif";for(var o=n.measureText("M").width;e=o,t+=1,n.font=t+"px sans-serif",e===(o=n.measureText("M").width)||50<t;);return t},f);function f(e,t,n,o,r,i,a,s){var u,c=h.call(this,e,t,n,o,r,i,a,s)||this;c._glyphAreas={},c._cssFontFamily="number"==typeof(u=e)?d(u):"string"==typeof u?p(u):u.map(function(e){return("string"==typeof e?p:d)(e)}).join(",");var l=d(P.FontFamily.SansSerif);return-1===c._cssFontFamily.indexOf(l)&&(c._cssFontFamily+=","+l),c._marginW=Math.ceil(.3*c.fontSize+c.strokeWidth/2),c._marginH=Math.ceil(.3*c.fontSize+c.strokeWidth/2),void 0===f._environmentMinimumFontSize&&(f._environmentMinimumFontSize=c.measureMinimumFontSize()),c}n.GlyphFactory=b},{"./CanvasSurface":12,"@akashic/akashic-engine":"@akashic/akashic-engine"}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RenderingHelper=void 0;var o,_=e("@akashic/akashic-engine"),r=e("./SurfaceFactory");(o=n.RenderingHelper||(n.RenderingHelper={})).toTextFromCompositeOperation=function(e){var t;switch(e){case _.CompositeOperation.SourceAtop:t="source-atop";break;case _.CompositeOperation.Lighter:t="lighter";break;case _.CompositeOperation.Copy:t="copy";break;default:t="source-over"}return t},o.toCompositeOperationFromText=function(e){var t;switch(e){case"source-atop":t=_.CompositeOperation.SourceAtop;break;case"lighter":t=_.CompositeOperation.Lighter;break;case"copy":t=_.CompositeOperation.Copy;break;default:t=_.CompositeOperation.SourceOver}return t},o.drawSystemTextByContext2D=function(e,t,n,o,r,i,a,s,u,c,l,d,p){var h,f,y;switch(e.save(),c){case _.FontFamily.Monospace:h="monospace";break;case _.FontFamily.Serif:h="serif";break;default:h="sans-serif"}switch(e.font=i+"px "+h,a){case _.TextAlign.Right:f="right";break;case _.TextAlign.Center:f="center";break;default:f="left"}switch(e.textAlign=f,s){case _.TextBaseline.Top:y="top";break;case _.TextBaseline.Middle:y="middle";break;case _.TextBaseline.Bottom:y="bottom";break;default:y="alphabetic"}e.textBaseline=y,e.lineJoin="bevel",0<l&&(e.lineWidth=l,e.strokeStyle=d,void 0===r?e.strokeText(t,n,o):e.strokeText(t,n,o,r)),p||(e.fillStyle=u,void 0===r?e.fillText(t,n,o):e.fillText(t,n,o,r)),e.restore()},o.createPrimarySurface=function(e,t,n){return r.SurfaceFactory.createPrimarySurface(e,t,n)},o.createBackSurface=function(e,t,n,o){return r.SurfaceFactory.createBackSurface(e,t,n,o)}},{"./SurfaceFactory":16,"@akashic/akashic-engine":"@akashic/akashic-engine"}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SurfaceFactory=void 0;var o,r=e("./CanvasSurface");(o=n.SurfaceFactory||(n.SurfaceFactory={})).createPrimarySurface=function(e,t,n){return new r.CanvasSurface(e,t)},o.createBackSurface=function(e,t,n,o){return new r.CanvasSurface(e,t)}},{"./CanvasSurface":12}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InputAbstractHandler=void 0;var o=e("@akashic/akashic-engine"),r=(e("@akashic/akashic-pdi"),i.isSupported=function(){return!1},i.prototype.start=function(){throw new Error("This method is abstract")},i.prototype.stop=function(){throw new Error("This method is abstract")},i.prototype.setScale=function(e,t){void 0===t&&(t=e),this._xScale=e,this._yScale=t},i.prototype.pointDown=function(e,t){this.pointTrigger.fire({type:0,identifier:e,offset:this.getOffsetFromEvent(t)}),this.pointerEventLock[e]=!0},i.prototype.pointMove=function(e,t){this.pointerEventLock.hasOwnProperty(e+"")&&this.pointTrigger.fire({type:1,identifier:e,offset:this.getOffsetFromEvent(t)})},i.prototype.pointUp=function(e,t){this.pointerEventLock.hasOwnProperty(e+"")&&(this.pointTrigger.fire({type:2,identifier:e,offset:this.getOffsetFromEvent(t)}),delete this.pointerEventLock[e])},i.prototype.getOffsetFromEvent=function(e){return{x:e.offsetX,y:e.offsetY}},i.prototype.getScale=function(){return{x:this._xScale,y:this._yScale}},i);function i(e,t){if(Object.getPrototypeOf&&Object.getPrototypeOf(this)===i.prototype)throw new Error("InputAbstractHandler is abstract and should not be directly instantiated");this.inputView=e,this.pointerEventLock={},this._xScale=1,this._yScale=1,this._disablePreventDefault=!!t,this.pointTrigger=new o.Trigger}n.InputAbstractHandler=r},{"@akashic/akashic-engine":"@akashic/akashic-engine","@akashic/akashic-pdi":35}],18:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MouseHandler=void 0;var i,a=e("./InputAbstractHandler"),s=(i=a.InputAbstractHandler,r(u,i),u.prototype.start=function(){this.inputView.addEventListener("mousedown",this.onMouseDown,!1)},u.prototype.stop=function(){this.inputView.removeEventListener("mousedown",this.onMouseDown,!1)},u);function u(e,t){var n=i.call(this,e,t)||this;return n.onMouseDown=function(e){0===e.button&&(n.eventTarget=e.target,n.pointDown(1,e),window.addEventListener("mousemove",n.onMouseMove,!1),window.addEventListener("mouseup",n.onMouseUp,!1),n._disablePreventDefault||(e.stopPropagation(),e.preventDefault()))},n.onMouseMove=function(e){e.target===n.eventTarget&&(n.pointMove(1,e),n._disablePreventDefault||(e.stopPropagation(),e.preventDefault()))},n.onMouseUp=function(e){e.target===n.eventTarget&&(n.pointUp(1,e),window.removeEventListener("mousemove",n.onMouseMove,!1),window.removeEventListener("mouseup",n.onMouseUp,!1),n._disablePreventDefault||(e.stopPropagation(),e.preventDefault()))},n}n.MouseHandler=s},{"./InputAbstractHandler":17}],19:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TouchHandler=void 0;var a,i=e("./MouseHandler"),s=(a=i.MouseHandler,r(u,a),u.prototype.start=function(){a.prototype.start.call(this),this.inputView.addEventListener("touchstart",this.onTouchDown),this.inputView.addEventListener("touchmove",this.onTouchMove),this.inputView.addEventListener("touchend",this.onTouchUp)},u.prototype.stop=function(){a.prototype.stop.call(this),this.inputView.removeEventListener("touchstart",this.onTouchDown),this.inputView.removeEventListener("touchmove",this.onTouchMove),this.inputView.removeEventListener("touchend",this.onTouchUp)},u.prototype.convertToPagePosition=function(e){var t=this.inputView.getBoundingClientRect(),n=this.getScale();return{offsetX:(e.pageX-Math.round(window.pageXOffset+t.left))/n.x,offsetY:(e.pageY-Math.round(window.pageYOffset+t.top))/n.y}},u);function u(e,t){var i=a.call(this,e,t)||this;return i.onTouchDown=function(e){for(var t=e.changedTouches,n=0,o=t.length;n<o;n++){var r=t[n];i.pointDown(r.identifier,i.convertToPagePosition(r))}i._disablePreventDefault||(e.stopPropagation(),e.cancelable&&e.preventDefault())},i.onTouchMove=function(e){for(var t=e.changedTouches,n=0,o=t.length;n<o;n++){var r=t[n];i.pointMove(r.identifier,i.convertToPagePosition(r))}i._disablePreventDefault||(e.stopPropagation(),e.cancelable&&e.preventDefault())},i.onTouchUp=function(e){for(var t=e.changedTouches,n=0,o=t.length;n<o;n++){var r=t[n];i.pointUp(r.identifier,i.convertToPagePosition(r))}i._disablePreventDefault||(e.stopPropagation(),e.cancelable&&e.preventDefault())},i}n.TouchHandler=s},{"./MouseHandler":18}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AudioPluginManager=void 0;var o=(r.prototype.getActivePlugin=function(){return this._activePlugin},r.prototype.tryInstallPlugin=function(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];if(!o.isSupported)return this._activePlugin=o,!0;var r=o;if(r.isSupported())return this._activePlugin=new r,!0}return!1},r);function r(){this._activePlugin=null}n.AudioPluginManager=o},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AudioPluginRegistry=void 0;var o=[];n.AudioPluginRegistry={addPlugin:function(e){-1===o.indexOf(e)&&o.push(e)},getRegisteredAudioPlugins:function(){return o},clear:function(){o=[]}}},{}],22:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLAudioAsset=void 0;var i,s=e("@akashic/akashic-engine"),a=(i=s.AudioAsset,r(u,i),u.prototype._load=function(e){var n=this;if(null==this.path)return this.data=null,void setTimeout(function(){return e._onAssetLoad(n)},0);function t(e,t){r.autoplay=!1,r.preload="none",r.src=e,n._attachAll(r,t),r.preload="auto",a(r,t),r.load()}var o,r=new Audio,i={success:function(){n._detachAll(r,i),n.data=r,e._onAssetLoad(n),window.clearInterval(n._intervalId)},error:function(){n._detachAll(r,i),n.data=r,e._onAssetError(n,s.ExceptionFactory.createAssetLoadError("HTMLAudioAsset loading error")),window.clearInterval(n._intervalId)}},a=function(e,t){n._intervalCount=0,n._intervalId=window.setInterval(function(){4===e.readyState?t.success():(++n._intervalCount,600===n._intervalCount&&t.error())},100)};".aac"!==this.path.slice(-4)||-1===u.supportedFormats.indexOf("mp4")?t(this.path,i):(o={success:i.success,error:function(){n._detachAll(r,o),window.clearInterval(n._intervalId);var e=n.path.slice(0,n.path.length-4)+".mp4";t(e,i)}},t(this.path,o))},u.prototype.cloneElement=function(){return this.data?new Audio(this.data.src):null},u.prototype._assetPathFilter=function(e){return-1!==u.supportedFormats.indexOf("ogg")?s.PathUtil.addExtname(e,"ogg"):-1!==u.supportedFormats.indexOf("aac")?s.PathUtil.addExtname(e,"aac"):null},u.prototype._attachAll=function(e,t){t.success&&e.addEventListener("canplaythrough",t.success,!1),t.error&&(e.addEventListener("stalled",t.error,!1),e.addEventListener("error",t.error,!1),e.addEventListener("abort",t.error,!1))},u.prototype._detachAll=function(e,t){t.success&&e.removeEventListener("canplaythrough",t.success,!1),t.error&&(e.removeEventListener("stalled",t.error,!1),e.removeEventListener("error",t.error,!1),e.removeEventListener("abort",t.error,!1))},u);function u(){return null!==i&&i.apply(this,arguments)||this}n.HTMLAudioAsset=a},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],23:[function(e,t,n){"use strict";var o,r=0,i=[];function a(){s(),document.removeEventListener("keydown",a),document.removeEventListener("mousedown",a),document.removeEventListener("touchend",a)}function s(){r=2,i.forEach(function(e){return e.play()}),i=[]}(o||(o={})).setupChromeMEIWorkaround=function(e){function t(){switch(r){case 0:case 1:s()}r=2,clearTimeout(n)}switch(r){case 0:e.addEventListener("play",t,!0);var n=setTimeout(function(){switch(e.removeEventListener("play",t),r){case 0:i.push(e),r=1,document.addEventListener("keydown",a,!0),document.addEventListener("mousedown",a,!0),document.addEventListener("touchend",a,!0);break;case 1:i.push(e);break;case 2:e.play()}},100);break;case 1:i.push(e)}},t.exports=o},{}],24:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLAudioPlayer=void 0;var i,a=e("@akashic/akashic-engine"),s=e("./HTMLAudioAutoplayHelper"),u=(i=a.AudioPlayer,r(c,i),c.prototype.play=function(e){this.currentAudio&&this.stop();var t=e.cloneElement();t?(s.setupChromeMEIWorkaround(t),t.volume=this._calculateVolume(),t.play().catch(function(e){}),t.loop=e.loop,t.addEventListener("ended",this._endedEventHandler,!1),t.addEventListener("play",this._onPlayEventHandler,!1),this._isWaitingPlayEvent=!0,this._audioInstance=t):this._dummyDurationWaitTimer=setTimeout(this._endedEventHandler,e.duration),i.prototype.play.call(this,e)},c.prototype.stop=function(){this.currentAudio&&(this._clearEndedEventHandler(),this._audioInstance&&(this._isWaitingPlayEvent?this._isStopRequested=!0:(this._audioInstance.pause(),this._audioInstance=null)),i.prototype.stop.call(this))},c.prototype.changeVolume=function(e){i.prototype.changeVolume.call(this,e),this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},c.prototype._changeMuted=function(e){i.prototype._changeMuted.call(this,e),this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},c.prototype.notifyMasterVolumeChanged=function(){this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},c.prototype._onAudioEnded=function(){this._clearEndedEventHandler(),i.prototype.stop.call(this)},c.prototype._clearEndedEventHandler=function(){this._audioInstance&&this._audioInstance.removeEventListener("ended",this._endedEventHandler,!1),null!=this._dummyDurationWaitTimer&&(clearTimeout(this._dummyDurationWaitTimer),this._dummyDurationWaitTimer=null)},c.prototype._onPlayEvent=function(){this._isWaitingPlayEvent&&(this._isWaitingPlayEvent=!1,this._isStopRequested&&(this._isStopRequested=!1,this._audioInstance.pause(),this._audioInstance=null))},c.prototype._calculateVolume=function(){return this._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},c);function c(e,t){var n=i.call(this,e)||this;return n._manager=t,n._endedEventHandler=function(){n._onAudioEnded()},n._onPlayEventHandler=function(){n._onPlayEvent()},n._dummyDurationWaitTimer=null,n}n.HTMLAudioPlayer=u},{"./HTMLAudioAutoplayHelper":23,"@akashic/akashic-engine":"@akashic/akashic-engine"}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLAudioPlugin=void 0;var a=e("./HTMLAudioAsset"),o=e("./HTMLAudioPlayer"),r=(i.isSupported=function(){var e=document.createElement("audio"),t=!1;try{t=void 0!==e.canPlayType}catch(e){}return t},Object.defineProperty(i.prototype,"supportedFormats",{get:function(){return this._supportedFormats},set:function(e){this._supportedFormats=e,a.HTMLAudioAsset.supportedFormats=e},enumerable:!1,configurable:!0}),i.prototype.createAsset=function(e,t,n,o,r,i){return new a.HTMLAudioAsset(e,t,n,o,r,i)},i.prototype.createPlayer=function(e,t){return new o.HTMLAudioPlayer(e,t)},i.prototype._detectSupportedFormats=function(){if(-1!==navigator.userAgent.indexOf("Edge/"))return["aac"];var e=document.createElement("audio"),t=[];try{for(var n=["ogg","aac","mp4"],o=0,r=n.length;o<r;o++){var i=n[o],a=e.canPlayType("audio/"+i);"no"!==a&&""!==a&&t.push(i)}}catch(e){}return t},i);function i(){this._supportedFormats=this._detectSupportedFormats(),a.HTMLAudioAsset.supportedFormats=this.supportedFormats}n.HTMLAudioPlugin=r},{"./HTMLAudioAsset":22,"./HTMLAudioPlayer":24}],26:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyAudioAsset=void 0;var u,i=e("@akashic/akashic-engine"),a=(u=i.AudioAsset,r(s,u),s.prototype.destroy=function(){this._handlerSet.unloadAudioAsset(this.id),u.prototype.destroy.call(this)},s.prototype._load=function(t){var n=this;this._handlerSet.loadAudioAsset({id:this.id,assetPath:this.path,duration:this.duration,loop:this.loop,hint:this.hint},function(e){e?t._onAssetError(n,i.ExceptionFactory.createAssetLoadError(e)):t._onAssetLoad(n)})},s.prototype._assetPathFilter=function(e){return e},s);function s(e,t,n,o,r,i,a){var s=u.call(this,t,n,o,r,i,a)||this;return s._handlerSet=e,s}n.ProxyAudioAsset=a},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],27:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyAudioPlayer=void 0;var i,a=e("@akashic/akashic-engine"),s=(i=a.AudioPlayer,r(u,i),u.prototype.changeVolume=function(e){i.prototype.changeVolume.call(this,e),this._notifyVolumeToHandler()},u.prototype._changeMuted=function(e){i.prototype._changeMuted.call(this,e),this._notifyVolumeToHandler()},u.prototype.play=function(e){null!=this._audioPlayerId&&this.stop(),this._audioPlayerId="ap"+u._audioPlayerIdCounter++,this._handlerSet.createAudioPlayer({assetId:e.id,audioPlayerId:this._audioPlayerId,isPlaying:!0,volume:this._calculateVolume(),playbackRate:1}),i.prototype.play.call(this,e)},u.prototype.stop=function(){null!=this._audioPlayerId&&(this._handlerSet.stopAudioPlayer(this._audioPlayerId),this._handlerSet.destroyAudioPlayer(this._audioPlayerId),this._audioPlayerId=null),i.prototype.stop.call(this)},u.prototype.notifyMasterVolumeChanged=function(){this._notifyVolumeToHandler()},u.prototype._notifyVolumeToHandler=function(){null!=this._audioPlayerId&&this._handlerSet.changeAudioVolume(this._audioPlayerId,this._calculateVolume())},u.prototype._calculateVolume=function(){return this._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},u._audioPlayerIdCounter=0,u);function u(e,t,n){var o=i.call(this,t)||this;return o._audioPlayerId=null,o._handlerSet=e,o._manager=n,o}n.ProxyAudioPlayer=s},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyAudioPlugin=void 0;var a=e("./ProxyAudioAsset"),o=e("./ProxyAudioPlayer"),r=(i.isSupported=function(){return!0},i.prototype.createAsset=function(e,t,n,o,r,i){return new a.ProxyAudioAsset(this._handlerSet,e,t,n,o,r,i)},i.prototype.createPlayer=function(e,t){return new o.ProxyAudioPlayer(this._handlerSet,e,t)},i);function i(e){this.supportedFormats=[],this._handlerSet=e}n.ProxyAudioPlugin=r},{"./ProxyAudioAsset":26,"./ProxyAudioPlayer":27}],29:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WebAudioAsset=void 0;var i,u=e("@akashic/akashic-engine"),c=e("../../utils/XHRLoader"),l=e("./WebAudioHelper"),a=(i=u.AudioAsset,r(s,i),s.prototype._load=function(t){var n=this;if(null==this.path)return this.data=null,void setTimeout(function(){return t._onAssetLoad(n)},0);function o(e){n.data=e,t._onAssetLoad(n)}function r(){t._onAssetError(n,u.ExceptionFactory.createAssetLoadError("WebAudioAsset unknown loading error"))}function i(e){l.getAudioContext().decodeAudioData(e,o,r)}function a(e,n,o){s.getArrayBuffer(e,function(e,t){e?o(e):n(t)})}var s=new c.XHRLoader;".aac"!==this.path.slice(-4)?a(this.path,i,r):a(this.path,i,function(e){var t=n.path.slice(0,n.path.length-4)+".mp4";a(t,function(e){n.path=t,i(e)},r)})},s.prototype._assetPathFilter=function(e){return-1!==s.supportedFormats.indexOf("ogg")?u.PathUtil.addExtname(e,"ogg"):-1!==s.supportedFormats.indexOf("aac")?u.PathUtil.addExtname(e,"aac"):null},s.supportedFormats=[],s);function s(){return null!==i&&i.apply(this,arguments)||this}n.WebAudioAsset=a},{"../../utils/XHRLoader":34,"./WebAudioHelper":31,"@akashic/akashic-engine":"@akashic/akashic-engine"}],30:[function(e,t,n){"use strict";var o,r=e("./WebAudioHelper");function i(){r.getAudioContext().resume(),document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i),document.removeEventListener("touchend",i)}(o||(o={})).setupChromeMEIWorkaround=function(){var e,t,n,o=r.getAudioContext();o&&"function"!=typeof o.resume||(e=r.createGainNode(o),(t=o.createOscillator()).type="sawtooth",t.frequency.value=440,t.connect(e),t.start(0),n=o.state,t.disconnect(),"running"!==n&&(document.addEventListener("keydown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("touchend",i,!0)))},t.exports=o},{"./WebAudioHelper":31}],31:[function(e,t,n){"use strict";var o,r,i=window.AudioContext||window.webkitAudioContext,a=null;(r=o=o||{}).getAudioContext=function(){return a||(a=new i,r._workAroundSafari()),a},r.createGainNode=function(e){return e.createGain?e.createGain():e.createGainNode()},r.createBufferNode=function(e){var t=e.createBufferSource();return t.start||(t.start=t.noteOn,t.stop=t.noteOff),t},r._workAroundSafari=function(){document.addEventListener("touchstart",function e(){document.removeEventListener("touchstart",e),a.createBufferSource().start(0)},!0)},t.exports=o},{}],32:[function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WebAudioPlayer=void 0;var i,a=e("@akashic/akashic-engine"),s=e("./WebAudioHelper"),u=(i=a.AudioPlayer,r(c,i),c.prototype.changeVolume=function(e){i.prototype.changeVolume.call(this,e),this._gainNode.gain.value=this._calculateVolume()},c.prototype._changeMuted=function(e){i.prototype._changeMuted.call(this,e),this._gainNode.gain.value=this._calculateVolume()},c.prototype.play=function(e){var t;this.currentAudio&&this.stop(),e.data?((t=s.createBufferNode(this._audioContext)).loop=e.loop,t.buffer=e.data,this._gainNode.gain.value=this._calculateVolume(),t.connect(this._gainNode),this._sourceNode=t,this._sourceNode.onended=this._endedEventHandler,this._sourceNode.start(0)):this._dummyDurationWaitTimer=setTimeout(this._endedEventHandler,e.duration),i.prototype.play.call(this,e)},c.prototype.stop=function(){this.currentAudio&&(this._clearEndedEventHandler(),this._sourceNode&&this._sourceNode.stop(0),i.prototype.stop.call(this))},c.prototype.notifyMasterVolumeChanged=function(){this._gainNode.gain.value=this._calculateVolume()},c.prototype._onAudioEnded=function(){this._clearEndedEventHandler(),i.prototype.stop.call(this)},c.prototype._clearEndedEventHandler=function(){this._sourceNode&&(this._sourceNode.onended=null),null!=this._dummyDurationWaitTimer&&(clearTimeout(this._dummyDurationWaitTimer),this._dummyDurationWaitTimer=null)},c.prototype._calculateVolume=function(){return this._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},c);function c(e,t){var n=i.call(this,e)||this;return n._audioContext=s.getAudioContext(),n._manager=t,n._gainNode=s.createGainNode(n._audioContext),n._gainNode.connect(n._audioContext.destination),n._sourceNode=void 0,n._dummyDurationWaitTimer=null,n._endedEventHandler=function(){n._onAudioEnded()},n}n.WebAudioPlayer=u},{"./WebAudioHelper":31,"@akashic/akashic-engine":"@akashic/akashic-engine"}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebAudioPlugin=void 0;var a=e("./WebAudioAsset"),o=e("./WebAudioPlayer"),r=e("./WebAudioAutoplayHelper"),i=(s.isSupported=function(){return"AudioContext"in window||"webkitAudioContext"in window},Object.defineProperty(s.prototype,"supportedFormats",{get:function(){return this._supportedFormats},set:function(e){this._supportedFormats=e,a.WebAudioAsset.supportedFormats=e},enumerable:!1,configurable:!0}),s.prototype.createAsset=function(e,t,n,o,r,i){return new a.WebAudioAsset(e,t,n,o,r,i)},s.prototype.createPlayer=function(e,t){return new o.WebAudioPlayer(e,t)},s.prototype._detectSupportedFormats=function(){if(-1!==navigator.userAgent.indexOf("Edge/"))return["aac"];var e=document.createElement("audio"),t=[];try{for(var n=["ogg","aac","mp4"],o=0,r=n.length;o<r;o++){var i=n[o],a=e.canPlayType("audio/"+i);"no"!==a&&""!==a&&t.push(i)}}catch(e){}return t},s);function s(){this.supportedFormats=this._detectSupportedFormats(),r.setupChromeMEIWorkaround()}n.WebAudioPlugin=i},{"./WebAudioAsset":29,"./WebAudioAutoplayHelper":30,"./WebAudioPlayer":32}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.XHRLoader=void 0;var r=e("@akashic/akashic-engine"),o=(i.prototype.get=function(e,t){this._getRequestObject({url:e,responseType:"text"},t)},i.prototype.getArrayBuffer=function(e,t){this._getRequestObject({url:e,responseType:"arraybuffer"},t)},i.prototype._getRequestObject=function(t,n){var o=new XMLHttpRequest;o.open("GET",t.url,!0),o.responseType=t.responseType,o.timeout=this.timeout,o.addEventListener("timeout",function(){n(r.ExceptionFactory.createAssetLoadError("loading timeout"))},!1),o.addEventListener("load",function(){var e;200<=o.status&&o.status<300?(e="text"===t.responseType?o.responseText:o.response,n(null,e)):n(r.ExceptionFactory.createAssetLoadError("loading error. status: "+o.status))},!1),o.addEventListener("error",function(){n(r.ExceptionFactory.createAssetLoadError("loading error. status: "+o.status))},!1),o.send()},i);function i(e){void 0===e&&(e={}),this.timeout=e.timeout||15e3}n.XHRLoader=o},{"@akashic/akashic-engine":"@akashic/akashic-engine"}],35:[function(e,t,n){},{}],"@akashic/pdi-browser":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyAudioPlugin=n.WebAudioPlugin=n.HTMLAudioPlugin=n.AudioPluginRegistry=n.g=n.ResourceFactory=n.Platform=void 0;var o=e("./Platform");Object.defineProperty(n,"Platform",{enumerable:!0,get:function(){return o.Platform}});var r=e("./ResourceFactory");Object.defineProperty(n,"ResourceFactory",{enumerable:!0,get:function(){return r.ResourceFactory}});var i=e("@akashic/akashic-engine");n.g=i;var a=e("./plugin/AudioPluginRegistry");Object.defineProperty(n,"AudioPluginRegistry",{enumerable:!0,get:function(){return a.AudioPluginRegistry}});var s=e("./plugin/AudioPluginManager");Object.defineProperty(n,"AudioPluginManager",{enumerable:!0,get:function(){return s.AudioPluginManager}});var u=e("./plugin/HTMLAudioPlugin/HTMLAudioPlugin");Object.defineProperty(n,"HTMLAudioPlugin",{enumerable:!0,get:function(){return u.HTMLAudioPlugin}});var c=e("./plugin/WebAudioPlugin/WebAudioPlugin");Object.defineProperty(n,"WebAudioPlugin",{enumerable:!0,get:function(){return c.WebAudioPlugin}});var l=e("./plugin/ProxyAudioPlugin/ProxyAudioPlugin");Object.defineProperty(n,"ProxyAudioPlugin",{enumerable:!0,get:function(){return l.ProxyAudioPlugin}})},{"./Platform":4,"./ResourceFactory":6,"./plugin/AudioPluginManager":20,"./plugin/AudioPluginRegistry":21,"./plugin/HTMLAudioPlugin/HTMLAudioPlugin":25,"./plugin/ProxyAudioPlugin/ProxyAudioPlugin":28,"./plugin/WebAudioPlugin/WebAudioPlugin":33,"@akashic/akashic-engine":"@akashic/akashic-engine"}]},{},[]);